# Finances

# TOC

* [What](#what)
* [Why](#why)
* [How](#how)
* [Payroll](#payroll)
* [Bookkeeping](#bookkeeping)
* [Expenses](#expenses)
* [Invoicing Clients](#invoicing-clients)
* [dwyler Invoicing](#dwyler-invoicing)
* [Refunds, reversals, cancellations, etc.](#refunds-reversals-cancellations-etc)
* [Grants & Tax Credits](#grants--tax-credits)
* [Corporation Tax Return](#corporation-tax-return)
* [Budgeting](#budgeting)
* [Forecasting](#forecasting)
* [VAT Return](#vat-return)
* [International payments](#international-payments)
* [Reconciling Xero](#reconciling-xero)

# What?

A document that summarises our current financial processes and systems.

# Why?

So that we have a record of our processes in case someone else other than the person who normally carries them out needs to do them.

# How?

By creating and writing this document and including it as part of our process handbook.


# Payroll

Payroll is currently processed on the last business day of the month, follow these steps to post a payrun:

1. Log in to Xero, click Payroll, click Pay Runs

2. The new payrun will be automatically selected under 'New Pay Run' - click Process Pay Run

3. Post the new pay run to Xero, you'll receive a message, "*Pay run successfully processed. Payroll expense journal has been posted automatically and now includes an automatic entry for any Employment Allowance, where applicable.*"

4. Log in to the Santander bank account, go to `Multiple payments`, and select the existing `Payroll` template

4a. Check there are sufficient funds in the Santander account for the whole pay run (the `total cost` is at the top of the pay run screen in Xero)

4b. If there is anyone being paid via international transfer, take their total pay, go to `transferwise` and set up a payment to their account (if they're not already saved as a contact, it only takes a few seconds), mark it as `"DWYL SALARY" + MONTH`, and note down the amount (it will include a transfer fee)

4c. NB: don't include payments to freelancers in the same transaction as wages (as this makes it tricky further down the line when trying to reconcile payments against invoices). If you're paying freelancers at the same time, do it in a separate transaction.

5. Add payments of the net income amount (amount after tax) to the respective individuals (minus all international dwylers paid in other currencies) with the reference `"DWYL SALARY" + MONTH` (**NB**: references from the previous payroll will be autofilled so make sure to check this)

5a. Add `transferwise` payments (if any) to the list, but make sure that you use tranferwise's standard reference

5b. Add a payment to HMRC CUMBERNAULD, where the payment
reference is **Accounts Office Reference Number** + YY/**YY** + **MM** (17 characters),
where YY/YY is the tax year and MM is the tax month, e.g. YY/YY = 17/18 and MM = 01, so that *March 2018* = **1812** and *April 2018* = **1901**  

**The tax year starts in April, so April is the first month, i.e. April = 01**.  
+ To find the correct amount to pay, go to Payroll > Taxes & Filings - you'll be
able to see here what the amount due is for the latest payrun
  + For reference, the payment should equal the total of the following from the
   relevant payrun in Xero: Income tax, Student Loan deductions, Employee National
   Insurance Contribution (NIC), Employer NIC.  
  + **NOTE:** We have an [employment allowance of £3,000 _annually_](https://www.gov.uk/claim-employment-allowance). This means that
  starting in April of _every_ year, we do not have to pay Employ***er*** NIC
  until we get to that £3,000 sum (Xero spreads this out over the first two or three months of the year). Once our employer NIC reaches £3,000, we need
  to start paying it again (but Xero will work this out for you and factor it into
  the Amount Due).

For reference, each time a pay run is posted, Xero will automatically report to
HMRC with a [Full Payment Submission (FPS)](https://www.gov.uk/running-payroll/reporting-to-hmrc)
using the PAYE Real Time Information (RTI) service.

6. Check all the figures against the Xero pay run amounts and ensure they match before making submitting the `multiple payment` (for which you'll only need one OTP, rather than seven :smiley:)

7. In the relevant pay run in Xero, click Options > Email Payslips to email
everyone a copy of their payslip

8. Now you can upload Pensions data to the Pensions Provider (ours is The People's Pension). 
It's not the end of the world if you don't do this now as our account isn't charged immediately, but Xero doesn't send reminders
about this, so may as well do it now
  * In Xero, go to `Payroll > Pension Filings` and download the `TPP CSV` file for the month you're filing for
  * In TPP, go to `Submit employee data`, then upload the file, select `YYYY-MM-DD` as the CSV date format, hit "Upload only", and then submit (no need to make a payment as we're on Direct Debit) 

Please note: HMRC don't confirm the submission of the FPS until the 12th of the month - so don't be surprised when you get an email out of the blue saying that the submission has just been accepted

### Holidays & Leave

Everyone who's a part of the dwyl PAYE payroll has a Xero login so they can request holidays and see their remaining leave entitlement. dwylers may additionally take _unpaid_ leave by arrangement.

Xero is very fiddly with holidays so you should always double-check a pay run which includes any holidays. Once a holiday has been approved and included in a `pay run`, it can't be amended.

Because until 2018, holidays weren't tracked on Xero (CharlieHR), people's 2017 balance had to be added to their 2018 allowance manually as an `opening balance` (this will be written up separately as part of the `on-boarding process`). 

Holidays that fall within someone's annual allowance can be booked, approved, and included in a pay run automatically.

I've also added an `unpaid leave` category for holidays that exceed someone's annual allowance. In the holidays booking process, we ask that dwylers try to keep on top of things and split requests into `holiday` and `unpaid leave` if they go over their allowance. If they follow this, the third step below won't be necessary, but `approvers` should always double-check that no one is left with a negative leave balance.

Whoever approves the holiday should:

* Check whether the holiday would take the dwyler over their annual allowance (i.e. would make their holiday balance negative)
* If not, just approve the holiday
* If so, you need to split the request into two: 
  * Reduce the requested hours to use up the remaining balance (so if they've asked for 10 days but only have 7 remaining, set the request to 7 days and deal with the overage in the next step)
  * Open a new holiday "request", set the holiday type to `unpaid leave`, and set the amount as the overage from the previous step (3 days, in the example above)
  * Now approve both requests; and if you want to check it's worked, just process the pay run and you'll see both the paid and unpaid holiday split out at the top of the dwyler's payslip
* If you're editing leave requests, make sure to do so **before** they're included in a `pay run` (as you can't easily amend them once they've been in a pay run) 
* NB: if a holiday crosses two pay periods, Xero splits out how many hours are being assigned to each pay run. This is a very small point, but might be relevant if a holiday spans December and January

# Bookkeeping

Bookkeeping is the activity or occupation of keeping records of the financial affairs of a business. Our bookkeeping is kept up to date in Xero, the majority of it has been done by our accountants at iHorizon. When working with the accountants you will need to provide information about transactions in order to assist in reconciliations. A reconciliation is when a bank transaction is matched to a corresponding bill or invoice or marked and categorised appropriately according to the accounts. If not done by accountants., reconciliations can be done by a member of the team. Xero has many guides that explain how this is done: https://help.xero.com/uk/BankAccounts_Details_Reconciliation

# Expenses

## UK Expenses

Expenses incurred while on company business or directly on behalf of the company will be repaid to you as long as you submit receipts from any purchases (preferably very soon after the purchases).

* Generally, you should be getting permission before you spend - don't spend money without clearing it first
* "What can I expense?"
  * Business travel (but not your commuting costs) and subsistence (e.g. if working non-standard hours or travelling)
  * Spending on behalf of the company (e.g. coffee for a client; SAAS you've put on your own credit card)
* "What *can't* I expense?"
  * Anything not dwyl-related
  * Commuting costs, lunch, or any other day-to-day spending
* **Always get a VAT receipt** - we can't repay you without a receipt, and we can't reclaim VAT without a specific VAT receipt.
  * VAT receipts will have the vendor's VAT registration number on them and any VAT charged should be clearly marked
  * If in doubt, specifically ask for a VAT receipt
  * If this is not possible, just get a regular receipt
  * If the purchase is online, you may need to go to your `account` or `billing` page to download a PDF receipt
* If you're a PAYE dwyler, you'll have a Xero account. In which case the easiest thing to do is download the Xero app (*not* Xero expenses), and submit the receipt through the app:
  * Hit the :heavy_plus_sign: at the top right and select "receipt"
  * Hit the photo icon to take a photo of the receipt
  * Enter amount, date, location, and select "I want to be repaid" under "How did you pay"
  * Submit the claim, and it will be reviewed, approved (or queried!), and settled at the next bank run
* If you're a freelance dwyler, just take a photo of the receipt and email the attachment to finance@dwyl.com

## Foreign currency expenses

The reasons for this ludicrous process are explained [here](https://github.com/dwyl/hq/issues/430#issuecomment-376168913). 

In short, Xero doesn't accommodate foreign currency expenses so we have to put them through as `bills`

* Before you start, **arrange all your receipts by date** (because Xero does currency conversions based on the date)
* Yes, you guessed it, this means you need to **create one bill per date**
  * Though you can get away without doing this when it won't make too much of a difference, like when you're putting in loads of `dwylsummer` receipts for small amounts from the same fortnight 
* Using your phone's camera or the Xero app, take a photo of each receipt and name it according to the following convention:
  * `{date}-{amount}-{description}-{client}`
  * `account` will be e.g. `Braga` or `dwyl-summer` or `Thomas Cook`
  * Date is important (see above)
  * Description should be minimal - e.g. "food" 
* Just upload the files to the `file library`, rather than attaching them to an expense claim
![screenshot 2018-03-26 at 14 25 02](https://user-images.githubusercontent.com/11595920/37908967-8c026036-3101-11e8-91e7-e53b34e3c2bf.png)
* Open a new bill
  * Set the payee (the `from` field)
  * Set the currency
  * Set the date
  * Set the reference as `{dwyler name}`-exp-`{YYMMDD}`
* Now, because of your diligence in naming the receipt files, you can add them all to the bill and fill in the `amount`, the `description`, and the `client` from the filename rather than having to inspect each individual file (_very_ time-consuming in Xero)
* All done right? :laughing: Wrong. Xero doesn't display foreign currency bills converted to our base currency, so...
![screenshot 2018-05-08 at 14 58 18](https://user-images.githubusercontent.com/11595920/39762671-29933148-52d3-11e8-82e9-43da23267ca3.png)
  * If it's just one bill, you can hover over the currency in Euro or Dollars and see the converted amount (screenshot above)
  * If it's multiple bills and you don't want to add them all up manually, you need to go to the `payee`'s `contact` page and click on `View recent bills report` at the top of the page, and the `GBP` amount is in that report
* All these steps reproduce the functionality of an expense claim, so now that you have the total amount to be paid, you can just pay it and reconcile it as usual

# Invoicing clients

Clients are invoiced per project, per sprint. (i.e. a client with three different apps which run for three sprints each will receive nine invoices.)

* In the week that the relevant sprint finishes, create a `draft` bill in Xero
* Set the personnel involved, days worked, and rates along with any modifications (it's usually easier to just duplicate the last bill the client was sent, but beware changes in e.g. people's `day rate`)
* Any subscriptions we pay for on behalf of the client (e.g. hosting, CI) can be added to the bill now - if there are any, an option to add billable expenses to the invoice will appear, and Xero takes care of this automagically
* `References` vary depending on the client based on whether their accounts team requires a PO number. The general format is `MyClient MyProject Sprint XXX SprintStart - SprintEnd [PO YYY]`
* Leave the project in `drafts`. The `Approver` will then know it's ready to review
* Once the `Approver` has reviewed, she hits `Submit for approval` to signal to `Ops` that it's been approved
* `Ops` then gives it a final check, and updates the `Date` to today's date (from his point of view at the time), and updates the `Due Date` to 30 days from the `Date`
* Just double check that you've got the dates right, because otherwise the client will receive a demand for payment with less than 30 days' notice. V important. Now the invoice can be formally approved, and will appear in the `awaiting payment` tab.
* Now the invoice is ready to be emailed via Xero - just find the invoice and hit the `email` button.
  * If you need to add any notes to the email, you can do so before sending (e.g. "please note the new day rates as discussed")
  * Same with attachments (e.g. copies of Purchase Orders)


# dwyler Invoicing

`dwylers` submit invoices at (https://invoice.dwyl.com); this saves the details in the invoicing spreadsheet (search `Invoicing Responses` in Drive) and generates a PDF, which is saved in the `dwyl drive` and, more importantly, is sent to our bookkeeping software's files inbox. (The process is outlined [here](https://github.com/dwyl/process-handbook/blob/master/incoming-invoices.md)

Every week, we do a `Finance day`, so the following needs to be done (ideally before 5pm so payments go through on the same day)

* Company Director to approve latest invoices in the invoicing spreadsheet
* Go to Xero inbox and create bills from all `dwyler` invoices, and approve them all
* Go to the `awaiting payment` section (Accounts > Purchases > Awaiting Payment tab)
* Select the bills you want to pay and click the `batch payments` button
* (Currently we're unable to export the batch and import into our online banking system, but will update if this is sorted) (https://github.com/dwyl/hq/issues/399)
* **Manually** add up how much each `dwyler` gets *in total* (as in the next steps there's only one line per person, not per bill)
* Go to our online banking system, log in, go to `Multiple payments`, and create a new payment
* Add the `dwylers` who need paying
* Input each dwyler's total (the two unmarked input boxes are `pounds` and `pence`), and for the reference put in the number of each invoice (so the ref is of the format `DWYL123, DWYL124, DWYL125`)
* Check that the total for the `multiple payment` is the same as the total for the `batch payment` in Xero
* Pay using the online banking system in one go
* Get in the habit of refreshing the bank feed in Xero then reconciling the payment immediately if possible
* Go back to the invoicing spreadsheet and mark the invoices as `paid`
* Send a courtesy note to people you've paid informing them that they've been paid

### Xero notes
* To add a new `pay item` (e.g. if someone goes onto a new day rate), go to `Accounts > Inventory` and you'll be able to add/edit items there. Add day rates in the format `00£££ - £££ GBP Day Rate` (e.g. `00150 - 150 GBP Day Rate`)

# Refunds, reversals, cancellations etc.

## Credit notes

Credit notes can be raised very easily in Xero (they're like a reverse invoice, a promise to pay someone). This would happen if a client overpays on an invoice, or mistakenly settles a voided invoice, for example.

* Go to `Business > Invoices` and click the <kbd>New Credit Note</kbd> button
* Fill in the info as if it's a normal invoice
  * If the credit is to reverse a payment we've received, make sure the tax rate is the same as the original payment. (i.e. if our client has overpaid £100 + VAT, the credit note should be for £100 + VAT)
* (As a courtesy, you might want to send the PDF of the Credit Note to the supplier/client; on the other hand, this might also cause confusion, if the client think they'll apply the credit themselves)
* The easiest way of dealing with the credit is to apply it to the next invoice you raise for that contact - when you create the invoice, Xero automatically suggests that you apply the credit
* If this isn't possible, you'll have to transfer the credit manually (as a normal bank transfer)
  * In which case, you'll need to create a `receive money` transaction to reconcile the original overpayment
  * And, in the Credit Note itself, at the bottom fill in the fields for "Make a Cash Refund"
  * Now go to the reconciliation page and you can reconcile the manual money transfer to the Credit Note

## Straight reversals

We've created an account called `999 - Reversed/Cancelled Transactions`.

This is ***ONLY*** for when £X has gone in and £X has gone out (or vice versa :wink:) - the balance of the account should ***ALWAYS*** be `0`.

Items should therefore only *be coded as 999 in pairs* - so they **immediately** cancel each other out.

**NB**: you shouldn't be adding *ad hoc* transactions and coding them as `999` - it's only when there's a `bank feed item` with the money going in and a `bank feed item` with the money going out.

Do not use code `999` for any other reason than this. 

# Grants & Tax Credits

We have applied for the ZEN Grants Scheme for Cycling. This is a scheme that grants businesses up to £2k towards promoting sustainable travel.

We are also currently looking into partnering with an organisation to claim R&D tax credits. This is still being looked into, possible partners to deliver this include Leyton, ihorizon and GrantTree.

# Corporation Tax Return

Every year the company must file a CT600 corporation tax return. These instructions should be updated when we file the 16/17 accounts. Previous returns can be found here:
https://drive.google.com/drive/folders/0B0XeQ2t5WSK2eFVVWkR5R3dWQ1E

# Budgeting

We have yet to set annual / monthly budgets for activities (e.g. https://github.com/dwyl/hq/issues/331). Budgeting is currently decided on an ad hoc basis.

# Forecasting

We have yet to develop sophisticated forecasting tools; to do our current forecasting we are using Xero and management accounts.

# VAT return

We are VAT-registered so we need to submit a quarterly VAT return, and pay/reclaim VAT due. Fortunately Xero makes this **very easy**, as long as we've been diligent in storing invoices and receipts.

* Our VAT periods are Nov-Jan, Feb-Apr (also year-end), May-Jul, Aug-Oct
* VAT Return must be submitted **within one month and one week of the period end**
* To prepare to run the report in Xero...
  * Ensure you've reconciled all account transactions (including expenses) within the relevant period (or _at the very least_, make sure to do the purchases with VAT on them)
  * (Let's assume you've been very diligent and always inputted invoices with the correct VAT amount)
  * Ensure VAT receipts/invoices have been uploaded to Xero where possible - if the VAT man comes knocking, we'll need them 
  * If there are any charges from before the VAT period, that's fine, they can still be submitted - just reconcile them as usual
  * (And don't worry about `outgoing invoices` - they will all have VAT included correctly)
* Now you can run a dummy report and sense-check it:
  * Reports > VAT Return > `select correct quarter` > `click VAT Audit Report` - this is a breakdown of all transactions in the quarter
  * If you like you can export the report to `Google Sheets`, but if you work within Xero, you can click through from a line in the report to the transaction in Xero, which is a great time-saver
  * There's no real process for sense-checking - just scroll through and make sure the transactions under each category seem like they belong there. e.g. 
    * `412 - contractors` should usually be `Zero-rated` or `No VAT`; 
    * International purchases, domain names, SaaS charges - tend to be `Reverse charge`
    * "Stuff" bought in the UK (everything from food to hoodies to stationery) tends to be 20% VAT
    * Services paid for in the UK tend to be 20% VAT
* Now you can submit the return through Xero - just hit `File VAT return` on the VAT Return page. You'll need the `Gov Gateway` account details
* And finally, you need to pay HMRC; currently this is done automatically by Direct Debit so you don't need to do anything except ensure there are sufficient funds in the bank *on the 7th - 12th of the following month*, as HMRC take the money out of our account 3 business days after the payment date on the VAT return (but the manual payment details are below just in case)
  * Bank details are already stored in our Santander account, but can be found [here](https://www.gov.uk/pay-vat/bank-details)
  * Xero will helpfully tell you how much we owe (#5 on the VAT Return report page, in bold)
  * Pay it with our `VAT Registration Number` as the reference (search through old payments if you need to find it, it's the first nine numbers from previous payments) 

# International Payments
Our international payment processor is TransferWise. They are very easy to use, fast, and cheap. 

* (Get login details / log in to `transferwise`)
* Hit "Send money"
* Enter the amount your recipient should receive on the `amount` screen
* Select an existing payee from the list or create a new one with their...
  * Email address
  * Full name
  * International IBAN number
* Review the details (the bank name will come up based on the IBAN, so if it's a new payee just sense-check that the bank sounds right)
* Add a reference at the bottom of the `review` screen - this is essential as we can't add a reference to the bank transfer itself
* Now follow the instructions from transferwise:
  * Take their final amount in ££
  * Create a payment in our bank account (their account details will already be saved, and **the reference is always the same**)
  * Do the transfer
* Later (or the next day), log back into transferwise and download the receipt
  * NB: if possible, get the transferwise receipt and an invoice from whomever you're sending money to - the transferwise receipt because it includes the transfer fee, and the invoice because that would include VAT details

# Reconciling Xero

Transactions coming into or out of our two bank accounts need to be "reconciled". This means matching the transaction to a bill/invoice, categorising it to the correct `account` (e.g. Office supplies, sales, travel), marking the tax paid (if any) so that we can reclaim VAT in our quarterly return, and uploading any documentation to Xero (eg. VAT receipts, without which you aren't allowed to reclaim).

NB: before reconcilation is attempted, make sure the bank feeds have been updated recently [@rub1e - add link to process for this once it's written up]

## Santander account

The vast majority of our transactions are done through the Santander account. With Amazon purchases, web hosting subscriptions, and all the other day-to-day spending we do which we need to categorise, add tax, and reconcile, this account can get disorganised pretty quickly.

Ideally reconciliations should be undertaken regularly (weekly?) so they don't pile up and you're left looking for an invoice from 6 months ago.

* If a bill/invoice is received in advance, forward/upload it to Xero and create a draft bill
  * Best practice to add the creation date of the bill and the due date of the payment (we don't currently use this feature, but the reason for this is so we can see our upcoming liabilities and know how much cash to have at hand)
  * Search for the seller name (or add a new seller name)
  * Add the invoice reference
  * Add the items from the invoice line by line
  * Categorise each item to the correct account (e.g. office supplies, sales, travel) [@rub1e - this is probably due a section to itself?]
  * Apply the correct VAT rate. Xero will guess this automatically but gets it wrong. In a perfect world, we'd have a VAT receipt with the rate and amount clearly marked. But more often we'll have to figure it out ourselves [@rub1e - this is 100% going to need its own section]
  * Attach any documentation
  * Assign it to a client if it's a billable expense
* If a bill isn't received in advance (e.g. for an Amazon purchase), collect any documentation and proceed to the next step
* On the Xero dashboard (or in the `bank accounts` section), you'll see a button saying "Reconcile 123 items" under the Santander account. Click it and you're taken to the reconciliation page
* On the left is the feed straight from the Santander account - basically a list of individual bank transactions; on the right is where you match the transaction to a bill, invoice, etc.
* Xero will try to match transactions to existing invoices for you automatically. This is useful, but do make sure to double-check as a matter of course - you might well have two open invoices for the same amount (in which case Xero usually says "other possible matches found). If the transactions match, just hit OK - the transaction will disappear as it's now reconciled
* If Xero hasn't found a match but you think there is an existing invoice for the transaction, search for it yourself in the `match` tab on the right hand side. 
  * By default, only invoices/bills in GBP are displayed, so untick that box if you're looking for a foreign currency invoice
* If multiple invoices are settled with a single bank transaction, you can just tick them all in the `match` tab and Xero will show the running total - so you can't reconcile it until the total from the invoices matches the total spent. 
* If multiple transactions are meant to settle a single invoice (part-payments), use the `split` function - this deducts the money spent from the invoice and recalculates the remainder on the invoice (screenshot)
![screenshot 2018-10-10 at 12 45 11](https://user-images.githubusercontent.com/11595920/46734227-8133aa00-cc8a-11e8-8713-ffbb1cd39f96.png)
* If there is nothing to match the transaction to, you'll have to either create a `bill`, or create a `spend money` transaction from the reconciliation page.
  * To create a bill just follow the process above
  * But a `spend money` transaction turns out to be much more efficient, admin-wise (only for money *already* spent). These are like ad hoc invoices - they allow you to add all the info (tax, account, documentation etc.), but without going through the process of creating a full invoice and getting it approved. 
* Use `spend money` only when the money has already been spent, for things like:
  * Insurance payments - we don't get invoices in advance and we can't reclaim VAT on insurance
  * Amazon purchases - download the invoice (if any) from Amazon and add it to the transaction. If any of the items have different VAT rates on them, then split out each item in the order and do individual tax rates for each. If all items are on the same rate, just do the whole transaction as one item (saves **a lot** of time)
  
### Multiple payments

Xero doesn't do BACS so we can't easily export a batch payment from Xero and load it into Santander. Instead, we use Santander's `Multiple payments` facility for Wages and freelancer invoices, so we don't have to waste time with putting each one through as its own transaction.

The problem is that the bank feed only displays `Multiple Payment` and doesn't give the references. Usually it's pretty obvious (just from amounts and dates) which invoices a transaction covers, but sometimes it's not obvious, and you can't tell what reconciles with what. In which case...

* Log in to Santander
* Go to the relevant account, `Payments & Transfers > Multiple payments (left sidebar) > Search Multiple Payments > Select bank account`
* Then right-click on the names under `To Account/Payee` and open in a new tab to see the full breakdown
